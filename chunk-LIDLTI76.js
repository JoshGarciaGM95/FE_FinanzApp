import{a as F,c as T,d as O,e as D,g as k,h as P,o as j,p as q,r as U}from"./chunk-GRZKZ6LI.js";import{D as _,G as y,J as n,K as r,M as C,N as S,O as M,Q as s,V as I,W as p,X as h,Y as u,k as w,ka as E,la as V,n as v,p as m,pa as x,q as d,ra as N,v as c,wa as W,x as f,y as B}from"./chunk-ELEF5QF2.js";var g=class o{constructor(a){this.http=a}apiUrl=`${U.apiUrl}/api/branches`;createBranch(a){return this.http.post(`${this.apiUrl}/create`,a)}getBranchesByCompany(a){return this.http.get(`${this.apiUrl}/byCompany/${a}`)}static \u0275fac=function(e){return new(e||o)(v(N))};static \u0275prov=w({token:o,factory:o.\u0275fac,providedIn:"root"})};function A(o,a){if(o&1){let e=C();n(0,"button",17),S("click",function(){m(e);let l=M();return d(l.router.navigate(["/login"]))}),s(1,"Ingresar --->"),r()}}function G(o,a){if(o&1&&(n(0,"li",18),s(1),r()),o&2){let e=a.$implicit;c(),I(" ",e.branch_name," - ",e.address," - ",e.phone," - ",e.status," ")}}var L=class o{constructor(a,e){this.branchService=a;this.router=e;this.loadBranches()}branch={branch_name:"",address:"",phone:"",status:"active",creation_date:""};branches=[];loadBranches(){let a=Number(sessionStorage.getItem("companyId"));a&&this.branchService.getBranchesByCompany(a).subscribe({next:e=>{this.branches=e},error:e=>{this.branches=[]}})}onSubmit(){let e={company_id:Number(sessionStorage.getItem("companyId")),branch_name:this.branch.branch_name,address:this.branch.address,phone:this.branch.phone,status:this.branch.status,creation_date:this.branch.creation_date||new Date().toISOString(),id_User:sessionStorage.getItem("userId")};this.branchService.createBranch(e).subscribe({next:t=>{this.loadBranches(),this.branch={branch_name:"",address:"",phone:"",status:"active",creation_date:""}},error:t=>alert("Error al crear sucursal: "+t.message)})}static \u0275fac=function(e){return new(e||o)(f(g),f(W))};static \u0275cmp=B({type:o,selectors:[["app-branch-create"]],decls:30,vars:6,consts:[["branchForm","ngForm"],[1,"container","my-4"],[1,"row","g-3",3,"ngSubmit"],[1,"col-md-6"],["for","branchName",1,"form-label"],["id","branchName","type","text","name","branch_name","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","address",1,"form-label"],["id","address","type","text","name","address","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","phone",1,"form-label"],["id","phone","type","text","name","phone","required","","placeholder","Tel\xE9fono de la sucursal",1,"form-control",3,"ngModelChange","ngModel"],["for","status",1,"form-label"],["id","status","type","text","name","status","required","","placeholder","Estado de la sucursal",1,"form-control",3,"ngModelChange","ngModel"],[1,"col-12"],["type","submit",1,"btn","btn-primary"],["class","btn btn-outline-secondary ms-2","type","button",3,"click",4,"ngIf"],[1,"list-group"],["class","list-group-item list-group-item-action","style","cursor:pointer",4,"ngFor","ngForOf"],["type","button",1,"btn","btn-outline-secondary","ms-2",3,"click"],[1,"list-group-item","list-group-item-action",2,"cursor","pointer"]],template:function(e,t){if(e&1){let l=C();n(0,"div",1)(1,"h2"),s(2,"Crear Sucursal"),r(),n(3,"form",2,0),S("ngSubmit",function(){return m(l),d(t.onSubmit())}),n(5,"div",3)(6,"label",4),s(7,"Nombre de la sucursal"),r(),n(8,"input",5),u("ngModelChange",function(i){return m(l),h(t.branch.branch_name,i)||(t.branch.branch_name=i),d(i)}),r()(),n(9,"div",3)(10,"label",6),s(11,"Direcci\xF3n"),r(),n(12,"input",7),u("ngModelChange",function(i){return m(l),h(t.branch.address,i)||(t.branch.address=i),d(i)}),r()(),n(13,"div",3)(14,"label",8),s(15,"Tel\xE9fono"),r(),n(16,"input",9),u("ngModelChange",function(i){return m(l),h(t.branch.phone,i)||(t.branch.phone=i),d(i)}),r()(),n(17,"div",3)(18,"label",10),s(19,"Estado"),r(),n(20,"input",11),u("ngModelChange",function(i){return m(l),h(t.branch.status,i)||(t.branch.status=i),d(i)}),r()(),n(21,"div",12)(22,"button",13),s(23,"Crear Sucursal"),r(),_(24,A,2,0,"button",14),r()()(),n(25,"div",1)(26,"h3"),s(27,"Sucursales agregadas"),r(),n(28,"ul",15),_(29,G,2,4,"li",16),r()()}e&2&&(c(8),p("ngModel",t.branch.branch_name),c(4),p("ngModel",t.branch.address),c(4),p("ngModel",t.branch.phone),c(4),p("ngModel",t.branch.status),c(4),y("ngIf",t.branches.length>0),c(5),y("ngForOf",t.branches))},dependencies:[q,P,F,T,O,j,k,D,x,E,V],styles:[".branch-create-container[_ngcontent-%COMP%]{max-width:400px;margin:40px auto;padding:24px;box-shadow:0 2px 8px #0000001a;background:#fff;border-radius:8px}"]})};export{L as BranchCreateComponent};
