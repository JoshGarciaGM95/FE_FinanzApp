import{a as st}from"./chunk-TU5J36XR.js";import{a as ct}from"./chunk-QWYVFOOZ.js";import{a as U,b as X,c as z,d as G,e as J,f as ue,g as Z,h as $,i as oe,j as Ie,k as ae,l as se,m as ce,n as Ee,o as Y,p as j,q as ge,r as W}from"./chunk-7KQLKPIC.js";import{$ as Q,Aa as S,B as be,D as v,G as d,H as $e,I as Ke,J as n,K as i,L as R,M as P,N as x,O as p,P as Ce,Q as o,R as y,S as F,T as Qe,U as Xe,W as _,X as h,Y as b,_ as Se,a as B,aa as T,b as te,ba as H,c as he,ca as Ze,da as xe,e as Je,ea as Ye,k as V,ka as k,la as w,ma as ie,n as O,na as et,oa as tt,p as u,pa as E,q as g,qa as it,ra as A,sa as nt,ta as rt,ua as ne,v as s,va as re,wa as I,x as m,xa as N,y as C,ya as ot,za as at}from"./chunk-ELEF5QF2.js";var le=class r{constructor(t,e){this.http=t;this.router=e}apiUrl=`${W.apiUrl}/api/users`;loggedInSubject=new Je(!1);isLoggedIn$=this.loggedInSubject.asObservable();login(t){return this.http.post(`${this.apiUrl}/login`,t)}logout(){this.router.navigate(["/login"])}setLoggedIn(t){this.loggedInSubject.next(t),t||sessionStorage.clear()}static \u0275fac=function(e){return new(e||r)(O(A),O(I))};static \u0275prov=V({token:r,factory:r.\u0275fac,providedIn:"root"})};var de=class r{constructor(t,e){this.http=t;this.router=e}apiUrl=`${W.apiUrl}/api/subscriptions`;createSubscription(t){return this.http.post(`${this.apiUrl}/create`,t)}getSubscriptionByUser(t){return this.http.post(`${this.apiUrl}/ByUser`,{user_id:t})}static \u0275fac=function(e){return new(e||r)(O(A),O(I))};static \u0275prov=V({token:r,factory:r.\u0275fac,providedIn:"root"})};function ut(r,t){r&1&&(n(0,"div",19),o(1,"Por favor ingresa un email v\xE1lido"),i())}function gt(r,t){r&1&&(n(0,"div",19),o(1,"El email es "),n(2,"strong"),o(3,"requerido"),i()())}function ft(r,t){if(r&1){let e=P();n(0,"app-branch-select",20),x("branchSelected",function(c){u(e);let l=p();return g(l.onBranchSelected(c))}),i()}if(r&2){let e=p();d("branches",e.branches)}}var Me=class r{constructor(t,e,a){this.authService=t;this.subscriptionsService=e;this.route=a;this.isLoggedIn$=this.authService.isLoggedIn$}loginData={};isLoggedIn$;emailFormControl=new ue("",[X.required,X.email]);passwordFormControl=new ue("",[X.required,X.minLength(8)]);branches=[];showBranchSelect=!1;loginMessage="";onSubmit(){this.authService.login(this.loginData).subscribe(t=>{if(sessionStorage.setItem("token",t.token),this.authService.setLoggedIn(!0),sessionStorage.setItem("userId",t.userId),sessionStorage.setItem("username",t.username),sessionStorage.setItem("companyId",t.companyId),t.nextStep==="subscription"){this.loginMessage=t.message||"Debe adquirir una suscripci\xF3n antes de continuar.",this.route.navigate(["/plan"]);return}else if(t.nextStep==="company"){this.loginMessage=t.message||"Debe crear una empresa antes de continuar.",setTimeout(()=>{this.route.navigate(["/company-create"])},1500);return}else if(t.nextStep==="branch"){this.loginMessage=t.message||"Debe crear una sucursal antes de continuar.",setTimeout(()=>{this.route.navigate(["/branch-create"])},1500);return}t.branches&&t.branches.length>0?(this.branches=t.branches,sessionStorage.setItem("branches",JSON.stringify(t.branches)),t.branches.length===1?(sessionStorage.setItem("branchId",t.branches[0].branch_id.toString()),sessionStorage.setItem("branchName",t.branches[0].branch_name),this.navigateAfterLogin(t.userId)):this.route.navigate(["/branch-select"])):this.navigateAfterLogin(t.userId)})}onBranchSelected(t){sessionStorage.setItem("branchId",t.branch_id.toString()),sessionStorage.setItem("branchName",t.branch_name),this.showBranchSelect=!1,this.navigateAfterLogin(sessionStorage.getItem("userId"))}navigateAfterLogin(t){this.subscriptionsService.getSubscriptionByUser(t).subscribe(e=>{e.statusCode===200?this.route.navigate(["/home"]):e.statusCode===204&&!e.data&&this.route.navigate(["/plan"])},e=>{console.error("Error al obtener los planes del usuario:",e)})}redirectToRegister(){this.route.navigate(["/register"])}static \u0275fac=function(e){return new(e||r)(m(le),m(de),m(I))};static \u0275cmp=C({type:r,selectors:[["app-login"]],decls:26,vars:7,consts:[[1,"container","py-5"],[1,"row","justify-content-center","align-items-center"],[1,"col-md-6","d-none","d-md-block"],["src","https://th.bing.com/th/id/OIP.ygUHmEQK01k19UPGX5_G4gHaE8?rs=1&pid=ImgDetMain","alt","Login Image",1,"img-fluid","rounded","shadow"],[1,"col-md-6"],[1,"card","shadow"],[1,"card-body"],[1,"mb-4","text-center"],[3,"ngSubmit"],[1,"mb-3"],["for","email",1,"form-label"],["type","email","id","email","placeholder","Ex. pat@example.com","name","email",1,"form-control",3,"ngModelChange","formControl","ngModel"],["class","text-danger small",4,"ngIf"],["for","password",1,"form-label"],["type","password","id","password","placeholder","Ex. myPassword123","name","password",1,"form-control",3,"ngModelChange","formControl","ngModel"],[1,"d-flex","justify-content-between"],["type","submit",1,"btn","btn-primary"],["type","button",1,"btn","btn-secondary",3,"click"],[3,"branches","branchSelected",4,"ngIf"],[1,"text-danger","small"],[3,"branchSelected","branches"]],template:function(e,a){e&1&&(n(0,"div",0)(1,"div",1)(2,"div",2),R(3,"img",3),i(),n(4,"div",4)(5,"div",5)(6,"div",6)(7,"h3",7),o(8,"Iniciar Sesi\xF3n"),i(),n(9,"form",8),x("ngSubmit",function(){return a.onSubmit()}),n(10,"div",9)(11,"label",10),o(12,"Email"),i(),n(13,"input",11),b("ngModelChange",function(l){return h(a.loginData.email,l)||(a.loginData.email=l),l}),i(),v(14,ut,2,0,"div",12)(15,gt,4,0,"div",12),i(),n(16,"div",9)(17,"label",13),o(18,"Contrase\xF1a"),i(),n(19,"input",14),b("ngModelChange",function(l){return h(a.loginData.password,l)||(a.loginData.password=l),l}),i()(),n(20,"div",15)(21,"button",16),o(22,"Login"),i(),n(23,"button",17),x("click",function(){return a.redirectToRegister()}),o(24,"Registrarse"),i()()(),v(25,ft,1,1,"app-branch-select",18),i()()()()()),e&2&&(s(13),d("formControl",a.emailFormControl),_("ngModel",a.loginData.email),s(),d("ngIf",a.emailFormControl.hasError("email")&&!a.emailFormControl.hasError("required")),s(),d("ngIf",a.emailFormControl.hasError("required")),s(4),d("formControl",a.passwordFormControl),_("ngModel",a.loginData.password),s(6),d("ngIf",a.showBranchSelect))},dependencies:[j,$,U,z,G,J,ge,Ie,S,st,E,w],styles:["section[_ngcontent-%COMP%]{display:flex;align-items:center}.example-label[_ngcontent-%COMP%]{font-size:14px;margin:0 16px 0 8px;min-width:120px}.example-button-row[_ngcontent-%COMP%]{max-width:600px}.example-button-row[_ngcontent-%COMP%]   .mat-mdc-button-base[_ngcontent-%COMP%]{margin:8px 8px 8px 0}.example-flex-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;flex-wrap:wrap}.form-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100vh}.example-form[_ngcontent-%COMP%]{width:100%;max-width:400px;padding:20px;box-shadow:0 4px 6px #0000001a;background-color:#fff;border-radius:8px}.login-image-container[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;justify-content:center;align-items:center}.login-image[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}"]})};var Pe=class r{constructor(t,e){this.http=t;this.router=e}apiUrl=`${W.apiUrl}/api/users`;register(t){return this.http.post(`${this.apiUrl}/register`,t)}static \u0275fac=function(e){return new(e||r)(O(A),O(I))};static \u0275prov=V({token:r,factory:r.\u0275fac,providedIn:"root"})};function yt(r,t){r&1&&(n(0,"div",22),o(1,"Por favor ingresa un email v\xE1lido"),i())}function _t(r,t){r&1&&(n(0,"div",22),o(1,"El email es "),n(2,"strong"),o(3,"requerido"),i()())}function ht(r,t){r&1&&(n(0,"div",22),o(1,"Por favor ingresa un email v\xE1lido"),i())}function bt(r,t){r&1&&(n(0,"div",22),o(1,"El email es "),n(2,"strong"),o(3,"requerido"),i()())}function Ct(r,t){r&1&&(n(0,"div",22),o(1," Las contrase\xF1as no coinciden "),i())}var we=class r{constructor(t,e){this.route=t;this.registerService=e}token=null;emailFormControl=new ue("",[X.required,X.email]);passwordFormControl=new ue("",[X.required,X.minLength(8)]);userRegister={};ngOnInit(){}redirectToLogin(){this.route.navigate(["/login"])}onSubmit(){this.registerService.register(this.userRegister).subscribe(t=>{this.route.navigate(["/plan"])})}static \u0275fac=function(e){return new(e||r)(m(I),m(Pe))};static \u0275cmp=C({type:r,selectors:[["app-register"]],decls:38,vars:13,consts:[[1,"container","py-5"],[1,"row","justify-content-center"],[1,"col-md-8","col-lg-6"],[1,"card","shadow"],[1,"card-body"],[1,"mb-4","text-center"],[3,"ngSubmit"],[1,"mb-3"],["for","name",1,"form-label"],["id","name","type","text","name","name","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","email",1,"form-label"],["id","email","type","email","placeholder","Ex. pat@example.com","name","email","required","",1,"form-control",3,"ngModelChange","formControl","ngModel"],["class","text-danger small",4,"ngIf"],["for","confirmedEmail",1,"form-label"],["id","confirmedEmail","type","email","placeholder","Ex. pat@example.com","name","confirmedEmail","required","",1,"form-control",3,"ngModelChange","formControl","ngModel"],["for","password",1,"form-label"],["id","password","type","password","placeholder","Ex. myPassword123","name","password","required","",1,"form-control",3,"ngModelChange","formControl","ngModel"],["for","confirmedPassword",1,"form-label"],["id","confirmedPassword","type","password","placeholder","Ex. myPassword123","name","confirmedPassword","required","",1,"form-control",3,"ngModelChange","ngModel"],[1,"d-flex","justify-content-between"],["type","submit",1,"btn","btn-primary"],["type","button",1,"btn","btn-secondary",3,"click"],[1,"text-danger","small"]],template:function(e,a){e&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h3",5),o(6,"Registro de Usuario"),i(),n(7,"form",6),x("ngSubmit",function(){return a.onSubmit()}),n(8,"div",7)(9,"label",8),o(10,"Nombre"),i(),n(11,"input",9),b("ngModelChange",function(l){return h(a.userRegister.name,l)||(a.userRegister.name=l),l}),i()(),n(12,"div",7)(13,"label",10),o(14,"Email"),i(),n(15,"input",11),b("ngModelChange",function(l){return h(a.userRegister.email,l)||(a.userRegister.email=l),l}),i(),v(16,yt,2,0,"div",12)(17,_t,4,0,"div",12),i(),n(18,"div",7)(19,"label",13),o(20,"Confirmar Email"),i(),n(21,"input",14),b("ngModelChange",function(l){return h(a.userRegister.confirmedEmail,l)||(a.userRegister.confirmedEmail=l),l}),i(),v(22,ht,2,0,"div",12)(23,bt,4,0,"div",12),i(),n(24,"div",7)(25,"label",15),o(26,"Contrase\xF1a"),i(),n(27,"input",16),b("ngModelChange",function(l){return h(a.userRegister.password,l)||(a.userRegister.password=l),l}),i()(),n(28,"div",7)(29,"label",17),o(30,"Confirmar Contrase\xF1a"),i(),n(31,"input",18),b("ngModelChange",function(l){return h(a.userRegister.confirmedPassword,l)||(a.userRegister.confirmedPassword=l),l}),i(),v(32,Ct,2,0,"div",12),i(),n(33,"div",19)(34,"button",20),o(35,"Registrarse"),i(),n(36,"button",21),x("click",function(){return a.redirectToLogin()}),o(37,"Volver a Login"),i()()()()()()()()),e&2&&(s(11),_("ngModel",a.userRegister.name),s(4),d("formControl",a.emailFormControl),_("ngModel",a.userRegister.email),s(),d("ngIf",a.emailFormControl.hasError("email")&&!a.emailFormControl.hasError("required")),s(),d("ngIf",a.emailFormControl.hasError("required")),s(4),d("formControl",a.emailFormControl),_("ngModel",a.userRegister.confirmedEmail),s(),d("ngIf",a.emailFormControl.hasError("email")&&!a.emailFormControl.hasError("required")),s(),d("ngIf",a.emailFormControl.hasError("required")),s(4),d("formControl",a.passwordFormControl),_("ngModel",a.userRegister.password),s(4),_("ngModel",a.userRegister.confirmedPassword),s(),d("ngIf",a.userRegister.confirmedPassword&&a.userRegister.password!==a.userRegister.confirmedPassword))},dependencies:[E,w,j,$,U,z,G,Y,Z,J,ge,Ie,S],encapsulation:2})};var ve=class r{constructor(t){this.http=t}apiUrl=`${W.apiUrl}/api/plans`;register(){return this.http.get(`${this.apiUrl}/list`)}getPlanById(t){return this.http.post(`${this.apiUrl}/ById`,{plan_id:t})}static \u0275fac=function(e){return new(e||r)(O(A))};static \u0275prov=V({token:r,factory:r.\u0275fac,providedIn:"root"})};function St(r,t){if(r&1&&(n(0,"li"),R(1,"i"),n(2,"span"),o(3),i()()),r&2){let e=t.$implicit;s(),Ke(e.icon),s(2),Qe("",e.name,": ",e.description,"")}}function xt(r,t){if(r&1&&(n(0,"div")(1,"h6"),o(2),i(),n(3,"ul",11),v(4,St,4,5,"li",8),i()()),r&2){let e=t.$implicit;s(2),y(e.key),s(2),d("ngForOf",e.value)}}function It(r,t){if(r&1){let e=P();n(0,"div",3)(1,"div",4)(2,"div",5)(3,"h5",6),o(4),i(),n(5,"small"),o(6),i()(),n(7,"div",7),v(8,xt,5,2,"div",8),T(9,"keyvalue"),R(10,"hr"),n(11,"p"),o(12),i(),n(13,"p"),o(14,"Precio por Mes: "),n(15,"strong"),o(16),i()(),n(17,"p"),o(18,"Precio por A\xF1o: "),n(19,"strong"),o(20),i()()(),n(21,"div",9)(22,"button",10),x("click",function(){let c=u(e).$implicit,l=p();return g(l.selectPlan(c))}),o(23,"Seleccionar este plan"),i()()()()}if(r&2){let e=t.$implicit,a=p();s(4),y(e.plan_name),s(2),F("M\xE1ximo de Sucursales: ",e.max_branches,""),s(2),d("ngForOf",H(9,6,a.convertToObject(e.features))),s(4),F("M\xE1ximo de usuarios: ",e.max_users,""),s(4),y(e.price_monthly),s(4),y(e.price_yearly)}}var Fe=class r{constructor(t,e,a,c){this.route=t;this.authService=e;this.planService=a;this.subscriptionsService=c;this.token=sessionStorage.getItem("token"),this.userId=sessionStorage.getItem("userId")?parseInt(sessionStorage.getItem("userId"),10):null,this.authService.isLoggedIn$.subscribe(l=>{l||this.route.navigate(["/login"])}),this.getPlans()}selectPlan(t){if(!this.userId){alert("Usuario no identificado");return}let e={user_id:this.userId,plan_id:t.plan_id};this.subscriptionsService.createSubscription(e).subscribe({next:a=>{this.route.navigate(["/company-create"])},error:a=>{alert("Error al crear suscripci\xF3n: "+a.message)}})}token=null;plans=[];subscriptions={};haveSubscription=!1;features={RRHHH:[],Finance:[]};userId=null;convertToObject(t){try{return JSON.parse(t)}catch(e){return console.error("Error parsing string to object:",e),{RRHHH:[],Finance:[]}}}getPlans(){this.planService.register().subscribe(t=>{this.plans=t})}static \u0275fac=function(e){return new(e||r)(m(I),m(le),m(ve),m(de))};static \u0275cmp=C({type:r,selectors:[["app-plan"]],decls:3,vars:1,consts:[[1,"container","py-4"],[1,"row","g-4"],["class","col-md-3",4,"ngFor","ngForOf"],[1,"col-md-3"],[1,"card","h-100","shadow"],[1,"card-header","bg-primary","text-white"],[1,"card-title","mb-0"],[1,"card-body"],[4,"ngFor","ngForOf"],[1,"card-footer","bg-light"],[1,"btn","btn-success","w-100",3,"click"],[1,"mb-2"]],template:function(e,a){e&1&&(n(0,"div",0)(1,"div",1),v(2,It,24,8,"div",2),i()()),e&2&&(s(2),d("ngForOf",a.plans))},dependencies:[E,k,tt],styles:[".example-card[_ngcontent-%COMP%]{max-width:80%;height:100%}"]})};function Et(r,t){if(r&1){let e=P();n(0,"button",15),x("click",function(){u(e);let c=p();return g(c.Logout())}),R(1,"i",16),o(2," Cerrar sesi\xF3n "),i()}}var Ne=class r{constructor(t,e,a,c,l){this.authService=t;this.subscriptionsService=e;this.companyService=a;this.plansService=c;this.route=l;this.userId=sessionStorage.getItem("userId")?parseInt(sessionStorage.getItem("userId"),10):null,this.isLoggedIn$=this.authService.isLoggedIn$,this.username=sessionStorage.getItem("username"),this.branchName=sessionStorage.getItem("branchName")}showFiller=!1;SelectedFeature="";showFeature=!1;isLoggedIn$;isNotLoggedIn$=!0;username=null;userId=null;companyId=null;companyName=null;branchName=null;token=null;plan=null;features={RRHHH:[],Finance:[]};ngOnInit(){sessionStorage.getItem("token")&&this.authService.setLoggedIn(!0),this.authService.isLoggedIn$.subscribe(t=>{t?this.isNotLoggedIn$=!1:(this.route.navigate(["/login"]),this.isNotLoggedIn$=!0)}),this.getCompanyUser(),this.getSubscriptionsByUser(),setTimeout(()=>{if(!sessionStorage.getItem("companyId")){this.route.navigate(["/company-create"]);return}if(!sessionStorage.getItem("branchId")){this.route.navigate(["/branch-create"]);return}},500)}getCompanyUser(){this.userId&&this.companyService.getCompanyByUser(this.userId).subscribe(t=>{t&&(sessionStorage.setItem("companyId",t.company_id.toString()),sessionStorage.setItem("companyName",t.company_name),this.companyName=t.company_name,this.companyId=t.company_id)})}getSubscriptionsByUser(){this.userId?this.subscriptionsService.getSubscriptionByUser(this.userId).subscribe(t=>{t.statusCode===200&&t.data&&this.plansService.getPlanById(t.data.plan_id).subscribe(e=>{let a=e;this.features=a.features,console.log("Plan Features:",this.features)})},t=>{console.error("Error al obtener los planes del usuario:",t)}):console.warn("User ID is not available")}convertToObject(t){try{return JSON.parse(t)}catch(e){return console.error("Error parsing string to object:",e),{RRHHH:[],Finance:[]}}}convertToObjectFeature(t){try{return JSON.parse(t)}catch(e){return console.error("Error parsing string to object:",e),{id:0,name:"",description:"",icon:""}}}redirectTo(t){this.route.navigate(["/"+t])}Logout(){this.authService.setLoggedIn(!1),this.route.navigate(["/login"])}showSelectedFeatre(t){this.showFeature=!0,this.SelectedFeature=t}static \u0275fac=function(e){return new(e||r)(m(le),m(de),m(ct),m(ve),m(I))};static \u0275cmp=C({type:r,selectors:[["app-home"]],decls:25,vars:6,consts:[[1,"navbar","navbar-expand-lg","navbar-dark","bg-primary"],[1,"container-fluid"],[1,"navbar-brand"],[1,"d-flex","ms-auto"],["class","btn btn-outline-light",3,"click",4,"ngIf"],[1,"row"],[1,"col-md-2","d-none","d-md-block","bg-light","sidebar","py-3"],[1,"list-group"],["routerLink","/home/products/list","routerLinkActive","active",1,"list-group-item","list-group-item-action"],["routerLink","/home/inventory/list","routerLinkActive","active",1,"list-group-item","list-group-item-action"],["routerLink","/home/sales","routerLinkActive","active",1,"list-group-item","list-group-item-action"],["routerLink","/home/income","routerLinkActive","active",1,"list-group-item","list-group-item-action"],["routerLink","/home/client","routerLinkActive","active",1,"list-group-item","list-group-item-action"],["routerLink","/home/provider","routerLinkActive","active",1,"list-group-item","list-group-item-action"],[1,"col-md-9","ms-sm-auto","col-lg-10","px-md-4","py-4"],[1,"btn","btn-outline-light",3,"click"],[1,"bi","bi-box-arrow-right"]],template:function(e,a){e&1&&(n(0,"nav",0)(1,"div",1)(2,"span",2),o(3),i(),n(4,"div",3),v(5,Et,3,0,"button",4),T(6,"async"),i()()(),n(7,"div",1)(8,"div",5)(9,"nav",6)(10,"div",7)(11,"a",8),o(12,"Producto"),i(),n(13,"a",9),o(14,"Inventario"),i(),n(15,"a",10),o(16,"Ventas"),i(),n(17,"a",11),o(18,"Compras"),i(),n(19,"a",12),o(20,"Clientes"),i(),n(21,"a",13),o(22,"Proveedores"),i()()(),n(23,"main",14),R(24,"router-outlet"),i()()()),e&2&&(s(3),Xe("",a.username," / ",a.companyName," / ",a.branchName,""),s(2),d("ngIf",H(6,4,a.isLoggedIn$)))},dependencies:[j,ge,S,re,N,ot,E,w,ie],styles:["mat-list-item.selected[_ngcontent-%COMP%]{background-color:#1976d2;color:#fff;font-weight:700}.example-spacer[_ngcontent-%COMP%]{flex:1 1 auto}.example-sidenav[_ngcontent-%COMP%]{padding:20px}.content[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;overflow:hidden}section[_ngcontent-%COMP%]{display:table}.example-label[_ngcontent-%COMP%]{display:table-cell;font-size:14px;margin-left:8px;min-width:120px}.example-button-row[_ngcontent-%COMP%]{display:table-cell;max-width:600px}.example-button-row[_ngcontent-%COMP%]   .mat-mdc-button-base[_ngcontent-%COMP%]{margin:8px 8px 8px 0}.example-flex-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;flex-wrap:wrap}html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{height:100%;margin:0;overflow:hidden}.example-action-buttons[_ngcontent-%COMP%]{padding-bottom:20px}.example-headers-align[_ngcontent-%COMP%]   .mat-expansion-panel-header-description[_ngcontent-%COMP%]{justify-content:space-between;align-items:center}.example-headers-align[_ngcontent-%COMP%]   .mat-mdc-form-field[_ngcontent-%COMP%] + .mat-mdc-form-field[_ngcontent-%COMP%]{margin-left:8px}.example-container[_ngcontent-%COMP%]{width:100%;height:92%;border:1px solid rgba(0,0,0,.5)}.example-sidenav-content[_ngcontent-%COMP%]{display:flex;height:100%;width:100%;align-items:center;justify-content:center}#scroll-nav[_ngcontent-%COMP%]{max-height:100%;overflow-y:auto}.example-button-container[_ngcontent-%COMP%]{display:flex;justify-content:center;width:140px}"],changeDetection:0})};var L=class r{constructor(t){this.http=t}apiUrl=`${W.apiUrl}/api/products`;getAll(){let t=sessionStorage.getItem("companyId")||"";return this.http.get(`${this.apiUrl}/list?company_id=${t}`)}getById(t){let e=sessionStorage.getItem("companyId")||"";return this.http.get(`${this.apiUrl}/get/${t}?company_id=${e}`)}create(t){return this.http.post(`${this.apiUrl}/new`,t)}update(t,e){return this.http.put(`${this.apiUrl}/update/${t}`,e)}delete(t){let e=sessionStorage.getItem("companyId")||"";return this.http.delete(`${this.apiUrl}/delete/${t}?company_id=${e}`)}static \u0275fac=function(e){return new(e||r)(O(A))};static \u0275prov=V({token:r,factory:r.\u0275fac,providedIn:"root"})};var Oe=class r{constructor(t){this.productService=t}transform(t){return new he(e=>{this.productService.getAll().subscribe(a=>{if(a){let c=a.find(l=>l.product_id===t);c?e.next(c.product_name):e.next("Unknown Product")}else e.next("Loading Products...");e.complete()})})}static \u0275fac=function(e){return new(e||r)(m(L,16))};static \u0275pipe=be({name:"productName",type:r,pure:!0})};var ee=class r{constructor(t){this.http=t}apiUrl=`${W.apiUrl}/api/inventory`;getFilters(){return{company_id:Number(sessionStorage.getItem("companyId")),branch_id:Number(sessionStorage.getItem("branchId"))}}getAll(){let t=this.getFilters();return this.http.get(this.apiUrl,{params:t})}getById(t){let e=this.getFilters();return this.http.get(`${this.apiUrl}/${t}`,{params:e})}create(t){let e=this.getFilters();return this.http.post(this.apiUrl,B(B({},t),e))}update(t,e){let a=this.getFilters();return this.http.put(`${this.apiUrl}/${t}`,B(B({},e),a))}delete(t){let e=this.getFilters();return this.http.delete(`${this.apiUrl}/${t}`,{params:e})}static \u0275fac=function(e){return new(e||r)(O(A))};static \u0275prov=V({token:r,factory:r.\u0275fac,providedIn:"root"})};var Mt=()=>["/home/inventory/create"],Pt=r=>["/home/inventory",r],wt=r=>["/home/inventory",r,"edit"];function Ft(r,t){if(r&1){let e=P();n(0,"tr")(1,"td"),o(2),i(),n(3,"td"),o(4),i(),n(5,"td"),o(6),i(),n(7,"td"),o(8),T(9,"productName"),T(10,"async"),i(),n(11,"td"),o(12),i(),n(13,"td")(14,"a",10),o(15,"Ver"),i(),n(16,"a",11),o(17,"Editar"),i(),n(18,"button",12),x("click",function(){let c=u(e).$implicit,l=p(2);return g(l.deleteInventory(c.inventory_id))}),o(19,"Eliminar"),i()()()}if(r&2){let e=t.$implicit;s(2),y(e.inventory_id),s(2),y(e.company_id),s(2),y(e.branch_id),s(2),y(H(10,9,H(9,7,e.product_id))),s(4),y(e.quantity),s(2),d("routerLink",Q(11,Pt,e.inventory_id)),s(2),d("routerLink",Q(13,wt,e.inventory_id))}}function Nt(r,t){if(r&1&&(n(0,"div")(1,"div",6)(2,"table",7)(3,"thead",8)(4,"tr")(5,"th"),o(6,"ID"),i(),n(7,"th"),o(8,"Empresa"),i(),n(9,"th"),o(10,"Sucursal"),i(),n(11,"th"),o(12,"Producto"),i(),n(13,"th"),o(14,"Cantidad"),i(),n(15,"th"),o(16,"Acciones"),i()()(),n(17,"tbody"),v(18,Ft,20,15,"tr",9),i()()()()),r&2){let e=p();s(18),d("ngForOf",e.inventories)}}function Ot(r,t){r&1&&(n(0,"div",13),o(1,"No hay inventario registrado."),i())}var Re=class r{constructor(t){this.inventoryService=t}inventories=[];displayedColumns=["inventory_id","company_id","branch_id","product_id","quantity","actions"];ngOnInit(){this.loadInventories()}loadInventories(){this.inventoryService.getAll().subscribe({next:t=>this.inventories=t,error:t=>console.error("Error cargando inventarios",t)})}deleteInventory(t){confirm("\xBFSeguro que deseas eliminar este inventario?")&&this.inventoryService.delete(t).subscribe({next:()=>this.loadInventories(),error:e=>alert("Error eliminando inventario: "+e.message)})}static \u0275fac=function(e){return new(e||r)(m(ee))};static \u0275cmp=C({type:r,selectors:[["app-inventory-list"]],decls:9,vars:4,consts:[["noInventories",""],[1,"container","my-4"],[1,"d-flex","justify-content-between","align-items-center","mb-3"],[1,"mb-0"],[1,"btn","btn-primary",3,"routerLink"],[4,"ngIf","ngIfElse"],[1,"table-responsive"],[1,"table","table-striped","table-bordered","align-middle"],[1,"table-dark"],[4,"ngFor","ngForOf"],[1,"btn","btn-sm","btn-info","me-1",3,"routerLink"],[1,"btn","btn-sm","btn-warning","me-1",3,"routerLink"],[1,"btn","btn-sm","btn-danger",3,"click"],[1,"alert","alert-info"]],template:function(e,a){if(e&1&&(n(0,"div",1)(1,"div",2)(2,"h2",3),o(3,"Inventario"),i(),n(4,"a",4),o(5,"Agregar Inventario"),i()(),v(6,Nt,19,1,"div",5)(7,Ot,2,0,"ng-template",null,0,xe),i()),e&2){let c=Ce(8);s(4),d("routerLink",Se(3,Mt)),s(2),d("ngIf",a.inventories&&a.inventories.length)("ngIfElse",c)}},dependencies:[E,k,w,ie,S,N,Oe],encapsulation:2})};var Dt=r=>["/home/inventory",r,"edit"];function Rt(r,t){if(r&1){let e=P();n(0,"div",1)(1,"h2"),o(2,"Detalle de Inventario"),i(),n(3,"div",2)(4,"div",3)(5,"p")(6,"strong"),o(7,"ID:"),i(),o(8),i(),n(9,"p")(10,"strong"),o(11,"Empresa:"),i(),o(12),i(),n(13,"p")(14,"strong"),o(15,"Sucursal:"),i(),o(16),i(),n(17,"p")(18,"strong"),o(19,"Producto:"),i(),o(20),i(),n(21,"p")(22,"strong"),o(23,"Cantidad:"),i(),o(24),i(),n(25,"p")(26,"strong"),o(27,"\xDAltima actualizaci\xF3n:"),i(),o(28),T(29,"date"),i()(),n(30,"div",4)(31,"a",5),o(32,"Editar"),i(),n(33,"button",6),x("click",function(){u(e);let c=p();return g(c.deleteInventory(c.inventory.inventory_id))}),o(34,"Eliminar"),i(),n(35,"a",7),o(36,"Volver"),i()()()()}if(r&2){let e=p();s(8),F(" ",e.inventory.inventory_id,""),s(4),F(" ",e.inventory.company_id,""),s(4),F(" ",e.inventory.branch_id,""),s(4),F(" ",e.inventory.product_id,""),s(4),F(" ",e.inventory.quantity,""),s(4),F(" ",Ze(29,7,e.inventory.last_updated,"short"),""),s(3),d("routerLink",Q(10,Dt,e.inventory.inventory_id))}}var Le=class r{constructor(t,e,a){this.route=t;this.inventoryService=e;this.router=a}inventory;ngOnInit(){let t=Number(this.route.snapshot.paramMap.get("id"));t&&this.inventoryService.getById(t).subscribe({next:e=>this.inventory=e,error:e=>alert("No se pudo cargar el inventario: "+e.message)})}deleteInventory(t){confirm("\xBFSeguro que deseas eliminar este inventario?")&&this.inventoryService.delete(t).subscribe({next:()=>this.router.navigate(["/home/inventory"]),error:e=>alert("Error eliminando inventario: "+e.message)})}static \u0275fac=function(e){return new(e||r)(m(ne),m(ee),m(I))};static \u0275cmp=C({type:r,selectors:[["app-inventory-detail"]],decls:1,vars:1,consts:[["class","container my-4",4,"ngIf"],[1,"container","my-4"],[1,"card","shadow"],[1,"card-body"],[1,"card-footer","d-flex","gap-2"],[1,"btn","btn-primary",3,"routerLink"],[1,"btn","btn-danger",3,"click"],["routerLink","/home/inventory",1,"btn","btn-secondary"]],template:function(e,a){e&1&&v(0,Rt,37,12,"div",0),e&2&&d("ngIf",a.inventory)},dependencies:[E,w,et,S,N],encapsulation:2})};function Lt(r,t){if(r&1&&(n(0,"option",14),o(1),i()),r&2){let e=t.$implicit;d("value",e.product_id),s(),y(e.product_name)}}function Tt(r,t){if(r&1&&(n(0,"div",15),o(1),i()),r&2){let e=p();s(),y(e.successMessage)}}function Vt(r,t){if(r&1&&(n(0,"div",16),o(1),i()),r&2){let e=p();s(),y(e.errorMessage)}}var Te=class r{constructor(t,e,a){this.inventoryService=t;this.productService=e;this.router=a}inventory={product_id:0,quantity:0};products=[];successMessage="";errorMessage="";ngOnInit(){this.productService.getAll().subscribe({next:t=>this.products=t,error:t=>this.errorMessage="Error cargando productos: "+t.message})}onSubmit(){this.successMessage="",this.errorMessage="";let t=Number(sessionStorage.getItem("companyId")),e=Number(sessionStorage.getItem("branchId")),a=te(B({},this.inventory),{company_id:t,branch_id:e});this.inventoryService.create(a).subscribe({next:()=>{this.successMessage="Inventario creado exitosamente.",setTimeout(()=>this.router.navigate(["/home/inventory"]),1200)},error:c=>this.errorMessage="Error al crear inventario: "+c.message})}static \u0275fac=function(e){return new(e||r)(m(ee),m(L),m(I))};static \u0275cmp=C({type:r,selectors:[["app-inventory-create"]],decls:21,vars:5,consts:[["inventoryForm","ngForm"],[1,"container","my-4"],[1,"row","g-3",3,"ngSubmit"],[1,"col-md-6"],["for","product_id",1,"form-label"],["id","product_id","name","product_id","required","",1,"form-select",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],["for","quantity",1,"form-label"],["id","quantity","type","number","name","quantity","required","","min","1","placeholder","Cantidad","title","Cantidad","aria-label","Cantidad",1,"form-control",3,"ngModelChange","ngModel"],[1,"col-12"],["type","submit",1,"btn","btn-primary"],["type","button","routerLink","/home/inventory",1,"btn","btn-secondary"],["class","alert alert-success mt-3",4,"ngIf"],["class","alert alert-danger mt-3",4,"ngIf"],[3,"value"],[1,"alert","alert-success","mt-3"],[1,"alert","alert-danger","mt-3"]],template:function(e,a){if(e&1){let c=P();n(0,"div",1)(1,"h2"),o(2,"Agregar Inventario"),i(),n(3,"form",2,0),x("ngSubmit",function(){return u(c),g(a.onSubmit())}),n(5,"div",3)(6,"label",4),o(7,"Producto"),i(),n(8,"select",5),b("ngModelChange",function(f){return u(c),h(a.inventory.product_id,f)||(a.inventory.product_id=f),g(f)}),v(9,Lt,2,2,"option",6),i()(),n(10,"div",3)(11,"label",7),o(12,"Cantidad"),i(),n(13,"input",8),b("ngModelChange",function(f){return u(c),h(a.inventory.quantity,f)||(a.inventory.quantity=f),g(f)}),i()(),n(14,"div",9)(15,"button",10),o(16,"Guardar"),i(),n(17,"a",11),o(18,"Cancelar"),i()(),v(19,Tt,2,1,"div",12)(20,Vt,2,1,"div",13),i()()}e&2&&(s(8),_("ngModel",a.inventory.product_id),s(),d("ngForOf",a.products),s(4),_("ngModel",a.inventory.quantity),s(6),d("ngIf",a.successMessage),s(),d("ngIf",a.errorMessage))},dependencies:[E,k,w,j,$,se,ce,U,oe,ae,z,G,Y,Ee,Z,J,S,N],encapsulation:2})};function kt(r,t){if(r&1&&(n(0,"option",15),o(1),i()),r&2){let e=t.$implicit;d("value",e.product_id),s(),y(e.product_name)}}function At(r,t){if(r&1&&(n(0,"div",16),o(1),i()),r&2){let e=p(2);s(),y(e.successMessage)}}function jt(r,t){if(r&1&&(n(0,"div",17),o(1),i()),r&2){let e=p(2);s(),y(e.errorMessage)}}function Wt(r,t){if(r&1){let e=P();n(0,"div",2)(1,"h2"),o(2,"Editar Inventario"),i(),n(3,"form",3,0),x("ngSubmit",function(){u(e);let c=p();return g(c.onSubmit())}),n(5,"div",4)(6,"label",5),o(7,"Producto"),i(),n(8,"select",6),b("ngModelChange",function(c){u(e);let l=p();return h(l.inventory.product_id,c)||(l.inventory.product_id=c),g(c)}),v(9,kt,2,2,"option",7),i()(),n(10,"div",4)(11,"label",8),o(12,"Cantidad"),i(),n(13,"input",9),b("ngModelChange",function(c){u(e);let l=p();return h(l.inventory.quantity,c)||(l.inventory.quantity=c),g(c)}),i()(),n(14,"div",10)(15,"button",11),o(16,"Actualizar"),i(),n(17,"a",12),o(18,"Cancelar"),i()(),v(19,At,2,1,"div",13)(20,jt,2,1,"div",14),i()()}if(r&2){let e=p();s(8),_("ngModel",e.inventory.product_id),s(),d("ngForOf",e.products),s(4),_("ngModel",e.inventory.quantity),s(6),d("ngIf",e.successMessage),s(),d("ngIf",e.errorMessage)}}var Ve=class r{constructor(t,e,a,c){this.route=t;this.inventoryService=e;this.productService=a;this.router=c}inventory={};products=[];id=0;successMessage="";errorMessage="";ngOnInit(){this.productService.getAll().subscribe({next:t=>this.products=t,error:t=>this.errorMessage="Error cargando productos: "+t.message}),this.id=Number(this.route.snapshot.paramMap.get("id")),this.id&&this.inventoryService.getById(this.id).subscribe({next:t=>this.inventory=t,error:t=>this.errorMessage="No se pudo cargar el inventario: "+t.message})}onSubmit(){this.successMessage="",this.errorMessage="";let t=Number(sessionStorage.getItem("companyId")),e=Number(sessionStorage.getItem("branchId")),a=te(B({},this.inventory),{company_id:t,branch_id:e});this.inventoryService.update(this.id,a).subscribe({next:()=>{this.successMessage="Inventario actualizado exitosamente.",setTimeout(()=>this.router.navigate(["/home/inventory"]),1200)},error:c=>this.errorMessage="Error al actualizar inventario: "+c.message})}static \u0275fac=function(e){return new(e||r)(m(ne),m(ee),m(L),m(I))};static \u0275cmp=C({type:r,selectors:[["app-inventory-edit"]],decls:1,vars:1,consts:[["inventoryForm","ngForm"],["class","container my-4",4,"ngIf"],[1,"container","my-4"],[1,"row","g-3",3,"ngSubmit"],[1,"col-md-6"],["for","product_id",1,"form-label"],["id","product_id","name","product_id","required","",1,"form-select",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],["for","quantity",1,"form-label"],["id","quantity","type","number","name","quantity","required","","min","1","placeholder","Cantidad","title","Cantidad","aria-label","Cantidad",1,"form-control",3,"ngModelChange","ngModel"],[1,"col-12"],["type","submit",1,"btn","btn-primary"],["type","button","routerLink","/home/inventory",1,"btn","btn-secondary"],["class","alert alert-success mt-3",4,"ngIf"],["class","alert alert-danger mt-3",4,"ngIf"],[3,"value"],[1,"alert","alert-success","mt-3"],[1,"alert","alert-danger","mt-3"]],template:function(e,a){e&1&&v(0,Wt,21,5,"div",1),e&2&&d("ngIf",a.inventory)},dependencies:[E,k,w,j,$,se,ce,U,oe,ae,z,G,Y,Ee,Z,J,S,N],encapsulation:2})};var ke=class r{constructor(){}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=C({type:r,selectors:[["app-inventory"]],decls:1,vars:0,template:function(e,a){e&1&&R(0,"router-outlet")},dependencies:[S,re],styles:["table[_ngcontent-%COMP%], table-containe[_ngcontent-%COMP%]{width:100%}.mat-mdc-form-field[_ngcontent-%COMP%]{font-size:14px;width:100%}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{width:25%}"]})};var Ae=class r{constructor(){}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=C({type:r,selectors:[["app-product"]],decls:1,vars:0,template:function(e,a){e&1&&R(0,"router-outlet")},dependencies:[S,re],encapsulation:2})};var me=class r{constructor(t){this.http=t}apiUrl=`${W.apiUrl}/api/categories`;getAllCategories(){return this.http.get(`${this.apiUrl}/getAll?company_id=${sessionStorage.getItem("companyId")||""}`)}static \u0275fac=function(e){return new(e||r)(O(A))};static \u0275prov=V({token:r,factory:r.\u0275fac,providedIn:"root"})};var ye=class r{constructor(t){this.categoryService=t}transform(t){return new he(e=>{this.categoryService.getAllCategories().subscribe(a=>{if(a){let c=a.find(l=>l.category_id===t);c?e.next(c.category_name):e.next("Unknown Category")}else e.next("Loading Categories...");e.complete()})})}static \u0275fac=function(e){return new(e||r)(m(me,16))};static \u0275pipe=be({name:"category",type:r,pure:!0})};var qt=()=>["/home/products/create"],Bt=r=>["/home/products",r],Ht=r=>["/home/products",r,"edit"];function Ut(r,t){if(r&1){let e=P();n(0,"tr")(1,"td"),o(2),i(),n(3,"td"),o(4),i(),n(5,"td"),o(6),T(7,"category"),T(8,"async"),i(),n(9,"td"),o(10),i(),n(11,"td"),o(12),i(),n(13,"td"),o(14),i(),n(15,"td"),o(16),i(),n(17,"td")(18,"a",10),o(19,"Ver"),i(),n(20,"a",11),o(21,"Editar"),i(),n(22,"button",12),x("click",function(){let c=u(e).$implicit,l=p(2);return g(l.deleteProduct(c.product_id))}),o(23,"Eliminar"),i()()()}if(r&2){let e=t.$implicit;s(2),y(e.product_id),s(2),y(e.company_id),s(2),y(H(8,11,H(7,9,e.category_id))),s(4),y(e.product_code),s(2),y(e.product_name),s(2),y(e.cost_price),s(2),y(e.sale_price),s(2),d("routerLink",Q(13,Bt,e.product_id)),s(2),d("routerLink",Q(15,Ht,e.product_id))}}function zt(r,t){if(r&1&&(n(0,"div")(1,"div",6)(2,"table",7)(3,"thead",8)(4,"tr")(5,"th"),o(6,"ID"),i(),n(7,"th"),o(8,"Empresa"),i(),n(9,"th"),o(10,"Categor\xEDa"),i(),n(11,"th"),o(12,"C\xF3digo"),i(),n(13,"th"),o(14,"Nombre"),i(),n(15,"th"),o(16,"Precio Costo"),i(),n(17,"th"),o(18,"Precio Venta"),i(),n(19,"th"),o(20,"Acciones"),i()()(),n(21,"tbody"),v(22,Ut,24,17,"tr",9),i()()()()),r&2){let e=p();s(22),d("ngForOf",e.products)}}function Gt(r,t){r&1&&(n(0,"div",13),o(1,"No hay productos registrados."),i())}var je=class r{constructor(t){this.productService=t}products=[];displayedColumns=["product_id","company_id","category_id","product_code","product_name","cost_price","sale_price","actions"];ngOnInit(){this.loadProducts()}loadProducts(){this.productService.getAll().subscribe({next:t=>this.products=t,error:t=>console.error("Error cargando productos",t)})}deleteProduct(t){confirm("\xBFSeguro que deseas eliminar este producto?")&&this.productService.delete(t).subscribe({next:()=>this.loadProducts(),error:e=>alert("Error eliminando producto: "+e.message)})}static \u0275fac=function(e){return new(e||r)(m(L))};static \u0275cmp=C({type:r,selectors:[["app-product-list"]],decls:9,vars:4,consts:[["noProducts",""],[1,"container","my-4"],[1,"d-flex","justify-content-between","align-items-center","mb-3"],[1,"mb-0"],[1,"btn","btn-primary",3,"routerLink"],[4,"ngIf","ngIfElse"],[1,"table-responsive"],[1,"table","table-striped","table-bordered","align-middle"],[1,"table-dark"],[4,"ngFor","ngForOf"],[1,"btn","btn-sm","btn-info","me-1",3,"routerLink"],[1,"btn","btn-sm","btn-warning","me-1",3,"routerLink"],[1,"btn","btn-sm","btn-danger",3,"click"],[1,"alert","alert-info"]],template:function(e,a){if(e&1&&(n(0,"div",1)(1,"div",2)(2,"h2",3),o(3,"Productos"),i(),n(4,"a",4),o(5,"Agregar Producto"),i()(),v(6,zt,23,1,"div",5)(7,Gt,2,0,"ng-template",null,0,xe),i()),e&2){let c=Ce(8);s(4),d("routerLink",Se(3,qt)),s(2),d("ngIf",a.products&&a.products.length)("ngIfElse",c)}},dependencies:[E,k,w,ie,S,N,ye],encapsulation:2})};var Jt=r=>["/home/products",r,"edit"];function $t(r,t){if(r&1){let e=P();n(0,"div",1)(1,"h2"),o(2,"Detalle de Producto"),i(),n(3,"div",2)(4,"div",3)(5,"p")(6,"strong"),o(7,"ID:"),i(),o(8),i(),n(9,"p")(10,"strong"),o(11,"Empresa:"),i(),o(12),i(),n(13,"p")(14,"strong"),o(15,"Categor\xEDa:"),i(),o(16),i(),n(17,"p")(18,"strong"),o(19,"C\xF3digo:"),i(),o(20),i(),n(21,"p")(22,"strong"),o(23,"Nombre:"),i(),o(24),i(),n(25,"p")(26,"strong"),o(27,"Descripci\xF3n:"),i(),o(28),i(),n(29,"p")(30,"strong"),o(31,"Precio Costo:"),i(),o(32),i(),n(33,"p")(34,"strong"),o(35,"Precio Venta:"),i(),o(36),i(),n(37,"p")(38,"strong"),o(39,"Estado:"),i(),o(40),i(),n(41,"p")(42,"strong"),o(43,"Fecha de creaci\xF3n:"),i(),o(44),i()(),n(45,"div",4)(46,"a",5),o(47,"Editar"),i(),n(48,"button",6),x("click",function(){u(e);let c=p();return g(c.deleteProduct(c.product.product_id))}),o(49,"Eliminar"),i(),n(50,"a",7),o(51,"Volver"),i()()()()}if(r&2){let e=p();s(8),F(" ",e.product.product_id,""),s(4),F(" ",e.product.company_id,""),s(4),F(" ",e.product.category_id,""),s(4),F(" ",e.product.product_code,""),s(4),F(" ",e.product.product_name,""),s(4),F(" ",e.product.description,""),s(4),F(" ",e.product.cost_price,""),s(4),F(" ",e.product.sale_price,""),s(4),F(" ",e.product.status,""),s(4),F(" ",e.product.creation_date,""),s(2),d("routerLink",Q(11,Jt,e.product.product_id))}}var We=class r{constructor(t,e,a){this.route=t;this.productService=e;this.router=a}product;ngOnInit(){let t=Number(this.route.snapshot.paramMap.get("id"))||0;t&&this.productService.getById(t).subscribe({next:e=>this.product=e,error:e=>alert("No se pudo cargar el producto: "+e.message)})}deleteProduct(t){confirm("\xBFSeguro que deseas eliminar este producto?")&&this.productService.delete(t).subscribe({next:()=>this.router.navigate(["/home/products"]),error:e=>alert("Error eliminando producto: "+e.message)})}static \u0275fac=function(e){return new(e||r)(m(ne),m(L),m(I))};static \u0275cmp=C({type:r,selectors:[["app-product-detail"]],decls:1,vars:1,consts:[["class","container my-4",4,"ngIf"],[1,"container","my-4"],[1,"card","shadow"],[1,"card-body"],[1,"card-footer","d-flex","gap-2"],[1,"btn","btn-primary",3,"routerLink"],[1,"btn","btn-danger",3,"click"],["routerLink","/home/products",1,"btn","btn-secondary"]],template:function(e,a){e&1&&v(0,$t,52,13,"div",0),e&2&&d("ngIf",a.product)},dependencies:[E,w,S,N],encapsulation:2})};function Kt(r,t){r&1&&(n(0,"div",30)(1,"div",31),R(2,"div",32),i()())}function Qt(r,t){if(r&1&&(n(0,"option",33),o(1),i()),r&2){let e=t.$implicit;d("value",e.category_id),s(),y(e.category_name)}}function Xt(r,t){if(r&1&&(n(0,"div",34),o(1),i()),r&2){let e=p();s(),y(e.successMessage)}}function Zt(r,t){if(r&1&&(n(0,"div",35),o(1),i()),r&2){let e=p();s(),y(e.errorMessage)}}var qe=class r{constructor(t,e,a){this.productService=t;this.categoryService=e;this.router=a;this.loadCategories()}categories=[];isLoading=!1;successMessage="";errorMessage="";product={category_id:0,product_code:0,product_name:"",description:"",cost_price:void 0,sale_price:void 0,status:"",creation_date:""};loadCategories(){this.categoryService.getAllCategories().subscribe({next:t=>{this.categories=Array.isArray(t)?t:t.categories||[]},error:t=>{this.categories=[]}})}onSubmit(){if(this.isLoading=!0,this.successMessage="",this.errorMessage="",!this.product.category_id||!this.product.product_code||!this.product.product_name||this.product.cost_price===void 0||this.product.sale_price===void 0){this.isLoading=!1,this.errorMessage="Todos los campos obligatorios deben estar completos.";return}let t=Number(sessionStorage.getItem("companyId"))||0,e=te(B({},this.product),{company_id:t});this.productService.create(e).subscribe({next:()=>{this.isLoading=!1,this.successMessage="Producto creado exitosamente.",setTimeout(()=>this.router.navigate(["/home/products"]),1200)},error:a=>{this.isLoading=!1,this.errorMessage="Error al crear producto: "+a.message}})}static \u0275fac=function(e){return new(e||r)(m(L),m(me),m(I))};static \u0275cmp=C({type:r,selectors:[["app-product-create"]],decls:52,vars:15,consts:[["productForm","ngForm"],[1,"container","my-4"],[1,"row","g-3",3,"ngSubmit"],["class","mb-3",4,"ngIf"],[1,"col-md-6"],["for","category_id",1,"form-label"],["id","category_id","name","category_id","required","",1,"form-select",3,"ngModelChange","ngModel"],["value","","disabled","","selected",""],[3,"value",4,"ngFor","ngForOf"],["for","product_code",1,"form-label"],["id","product_code","type","text","name","product_code","required","","placeholder","C\xF3digo del producto","title","C\xF3digo del producto","aria-label","C\xF3digo del producto",1,"form-control",3,"ngModelChange","ngModel"],["for","product_name",1,"form-label"],["id","product_name","type","text","name","product_name","required","","placeholder","Nombre del producto","title","Nombre del producto","aria-label","Nombre del producto",1,"form-control",3,"ngModelChange","ngModel"],["for","description",1,"form-label"],["id","description","type","text","name","description","required","","placeholder","Descripci\xF3n","title","Descripci\xF3n","aria-label","Descripci\xF3n",1,"form-control",3,"ngModelChange","ngModel"],["for","cost_price",1,"form-label"],["id","cost_price","type","number","name","cost_price","required","","placeholder","Precio de costo","title","Precio de costo","aria-label","Precio de costo",1,"form-control",3,"ngModelChange","ngModel"],["for","sale_price",1,"form-label"],["id","sale_price","type","number","name","sale_price","required","","placeholder","Precio de venta","title","Precio de venta","aria-label","Precio de venta",1,"form-control",3,"ngModelChange","ngModel"],["for","status",1,"form-label"],["id","status","name","status","required","",1,"form-select",3,"ngModelChange","ngModel"],["value","Active"],["value","Inactive"],["for","creation_date",1,"form-label"],["id","creation_date","type","date","name","creation_date","placeholder","Fecha de creaci\xF3n","title","Fecha de creaci\xF3n","aria-label","Fecha de creaci\xF3n",1,"form-control",3,"ngModelChange","ngModel"],[1,"col-12"],["type","submit",1,"btn","btn-primary",3,"disabled"],["type","button","routerLink","/home/products",1,"btn","btn-secondary"],["class","alert alert-success mt-3",4,"ngIf"],["class","alert alert-danger mt-3",4,"ngIf"],[1,"mb-3"],[1,"progress"],[1,"progress-bar","progress-bar-striped","progress-bar-animated",2,"width","100%"],[3,"value"],[1,"alert","alert-success","mt-3"],[1,"alert","alert-danger","mt-3"]],template:function(e,a){if(e&1){let c=P();n(0,"div",1)(1,"h2"),o(2,"Agregar Producto"),i(),n(3,"form",2,0),x("ngSubmit",function(){return u(c),g(a.onSubmit())}),v(5,Kt,3,0,"div",3),n(6,"div",4)(7,"label",5),o(8,"Categor\xEDa"),i(),n(9,"select",6),b("ngModelChange",function(f){return u(c),h(a.product.category_id,f)||(a.product.category_id=f),g(f)}),n(10,"option",7),o(11,"Seleccione una categor\xEDa"),i(),v(12,Qt,2,2,"option",8),i()(),n(13,"div",4)(14,"label",9),o(15,"C\xF3digo"),i(),n(16,"input",10),b("ngModelChange",function(f){return u(c),h(a.product.product_code,f)||(a.product.product_code=f),g(f)}),i()(),n(17,"div",4)(18,"label",11),o(19,"Nombre"),i(),n(20,"input",12),b("ngModelChange",function(f){return u(c),h(a.product.product_name,f)||(a.product.product_name=f),g(f)}),i()(),n(21,"div",4)(22,"label",13),o(23,"Descripci\xF3n"),i(),n(24,"input",14),b("ngModelChange",function(f){return u(c),h(a.product.description,f)||(a.product.description=f),g(f)}),i()(),n(25,"div",4)(26,"label",15),o(27,"Precio Costo"),i(),n(28,"input",16),b("ngModelChange",function(f){return u(c),h(a.product.cost_price,f)||(a.product.cost_price=f),g(f)}),i()(),n(29,"div",4)(30,"label",17),o(31,"Precio Venta"),i(),n(32,"input",18),b("ngModelChange",function(f){return u(c),h(a.product.sale_price,f)||(a.product.sale_price=f),g(f)}),i()(),n(33,"div",4)(34,"label",19),o(35,"Estado"),i(),n(36,"select",20),b("ngModelChange",function(f){return u(c),h(a.product.status,f)||(a.product.status=f),g(f)}),n(37,"option",21),o(38,"Activo"),i(),n(39,"option",22),o(40,"Inactivo"),i()()(),n(41,"div",4)(42,"label",23),o(43,"Fecha de creaci\xF3n"),i(),n(44,"input",24),b("ngModelChange",function(f){return u(c),h(a.product.creation_date,f)||(a.product.creation_date=f),g(f)}),i()(),n(45,"div",25)(46,"button",26),o(47,"Guardar"),i(),n(48,"a",27),o(49,"Cancelar"),i()(),v(50,Xt,2,1,"div",28)(51,Zt,2,1,"div",29),i()()}e&2&&(s(5),d("ngIf",a.isLoading),s(4),_("ngModel",a.product.category_id),s(3),d("ngForOf",a.categories),s(4),_("ngModel",a.product.product_code),s(4),_("ngModel",a.product.product_name),s(4),_("ngModel",a.product.description),s(4),_("ngModel",a.product.cost_price),s(4),_("ngModel",a.product.sale_price),s(4),_("ngModel",a.product.status),s(8),_("ngModel",a.product.creation_date),s(2),d("disabled",a.isLoading),s(2),$e("disabled",a.isLoading),s(2),d("ngIf",a.successMessage),s(),d("ngIf",a.errorMessage))},dependencies:[E,k,w,j,$,se,ce,U,oe,ae,z,G,Y,Z,J,S,N],encapsulation:2})};function Yt(r,t){if(r&1&&(n(0,"option",28),o(1),T(2,"category"),T(3,"async"),i()),r&2){let e=t.$implicit;d("value",e.category_id),s(),y(H(3,4,H(2,2,e.category_id)))}}function ei(r,t){if(r&1&&(n(0,"div",29),o(1),i()),r&2){let e=p(2);s(),y(e.successMessage)}}function ti(r,t){if(r&1&&(n(0,"div",30),o(1),i()),r&2){let e=p(2);s(),y(e.errorMessage)}}function ii(r,t){if(r&1){let e=P();n(0,"div",2)(1,"h2"),o(2,"Editar Producto"),i(),n(3,"form",3,0),x("ngSubmit",function(){u(e);let c=p();return g(c.onSubmit())}),n(5,"div",4)(6,"label",5),o(7,"Categor\xEDa"),i(),n(8,"select",6),b("ngModelChange",function(c){u(e);let l=p();return h(l.product.category_id,c)||(l.product.category_id=c),g(c)}),n(9,"option",7),o(10,"Seleccione una categor\xEDa"),i(),v(11,Yt,4,6,"option",8),i()(),n(12,"div",4)(13,"label",9),o(14,"C\xF3digo"),i(),n(15,"input",10),b("ngModelChange",function(c){u(e);let l=p();return h(l.product.product_code,c)||(l.product.product_code=c),g(c)}),i()(),n(16,"div",4)(17,"label",11),o(18,"Nombre"),i(),n(19,"input",12),b("ngModelChange",function(c){u(e);let l=p();return h(l.product.product_name,c)||(l.product.product_name=c),g(c)}),i()(),n(20,"div",4)(21,"label",13),o(22,"Descripci\xF3n"),i(),n(23,"input",14),b("ngModelChange",function(c){u(e);let l=p();return h(l.product.description,c)||(l.product.description=c),g(c)}),i()(),n(24,"div",4)(25,"label",15),o(26,"Precio Costo"),i(),n(27,"input",16),b("ngModelChange",function(c){u(e);let l=p();return h(l.product.cost_price,c)||(l.product.cost_price=c),g(c)}),i()(),n(28,"div",4)(29,"label",17),o(30,"Precio Venta"),i(),n(31,"input",18),b("ngModelChange",function(c){u(e);let l=p();return h(l.product.sale_price,c)||(l.product.sale_price=c),g(c)}),i()(),n(32,"div",4)(33,"label",19),o(34,"Estado"),i(),n(35,"input",20),b("ngModelChange",function(c){u(e);let l=p();return h(l.product.status,c)||(l.product.status=c),g(c)}),i()(),n(36,"div",4)(37,"label",21),o(38,"Fecha de creaci\xF3n"),i(),n(39,"input",22),b("ngModelChange",function(c){u(e);let l=p();return h(l.product.creation_date,c)||(l.product.creation_date=c),g(c)}),i()(),n(40,"div",23)(41,"button",24),o(42,"Actualizar"),i(),n(43,"a",25),o(44,"Cancelar"),i()(),v(45,ei,2,1,"div",26)(46,ti,2,1,"div",27),i()()}if(r&2){let e=p();s(8),_("ngModel",e.product.category_id),s(3),d("ngForOf",e.categories),s(4),_("ngModel",e.product.product_code),s(4),_("ngModel",e.product.product_name),s(4),_("ngModel",e.product.description),s(4),_("ngModel",e.product.cost_price),s(4),_("ngModel",e.product.sale_price),s(4),_("ngModel",e.product.status),s(4),_("ngModel",e.product.creation_date),s(6),d("ngIf",e.successMessage),s(),d("ngIf",e.errorMessage)}}var Be=class r{constructor(t,e,a,c){this.route=t;this.productService=e;this.categoryService=a;this.router=c;this.loadCategories()}categories=[];product={};id=0;successMessage="";errorMessage="";loadCategories(){this.categoryService.getAllCategories().subscribe({next:t=>{this.categories=Array.isArray(t)?t:t.categories||[]},error:t=>{this.categories=[]}})}ngOnInit(){this.id=Number(this.route.snapshot.paramMap.get("id"))||0,this.id&&this.productService.getById(this.id).subscribe({next:t=>this.product=t,error:t=>this.errorMessage="No se pudo cargar el producto: "+t.message})}onSubmit(){this.successMessage="",this.errorMessage="";let t=te(B({},this.product),{company_id:Number(sessionStorage.getItem("companyId"))||0});this.productService.update(this.id,t).subscribe({next:()=>{this.successMessage="Producto actualizado exitosamente.",setTimeout(()=>this.router.navigate(["/home/products"]),1200)},error:e=>this.errorMessage="Error al actualizar producto: "+e.message})}static \u0275fac=function(e){return new(e||r)(m(ne),m(L),m(me),m(I))};static \u0275cmp=C({type:r,selectors:[["app-product-edit"]],decls:1,vars:1,consts:[["productForm","ngForm"],["class","container my-4",4,"ngIf"],[1,"container","my-4"],[1,"row","g-3",3,"ngSubmit"],[1,"col-md-6"],["for","category_id",1,"form-label"],["id","category_id","name","category_id","required","",1,"form-select",3,"ngModelChange","ngModel"],["value","","disabled",""],[3,"value",4,"ngFor","ngForOf"],["for","product_code",1,"form-label"],["id","product_code","type","text","name","product_code","required","","placeholder","C\xF3digo del producto","title","C\xF3digo del producto","aria-label","C\xF3digo del producto",1,"form-control",3,"ngModelChange","ngModel"],["for","product_name",1,"form-label"],["id","product_name","type","text","name","product_name","required","","placeholder","Nombre del producto","title","Nombre del producto","aria-label","Nombre del producto",1,"form-control",3,"ngModelChange","ngModel"],["for","description",1,"form-label"],["id","description","type","text","name","description","required","","placeholder","Descripci\xF3n","title","Descripci\xF3n","aria-label","Descripci\xF3n",1,"form-control",3,"ngModelChange","ngModel"],["for","cost_price",1,"form-label"],["id","cost_price","type","number","name","cost_price","required","","placeholder","Precio de costo","title","Precio de costo","aria-label","Precio de costo",1,"form-control",3,"ngModelChange","ngModel"],["for","sale_price",1,"form-label"],["id","sale_price","type","number","name","sale_price","required","","placeholder","Precio de venta","title","Precio de venta","aria-label","Precio de venta",1,"form-control",3,"ngModelChange","ngModel"],["for","status",1,"form-label"],["id","status","type","text","name","status","placeholder","Estado","title","Estado","aria-label","Estado",1,"form-control",3,"ngModelChange","ngModel"],["for","creation_date",1,"form-label"],["id","creation_date","type","date","name","creation_date","placeholder","Fecha de creaci\xF3n","title","Fecha de creaci\xF3n","aria-label","Fecha de creaci\xF3n",1,"form-control",3,"ngModelChange","ngModel"],[1,"col-12"],["type","submit",1,"btn","btn-primary"],["type","button","routerLink","/home/products",1,"btn","btn-secondary"],["class","alert alert-success mt-3",4,"ngIf"],["class","alert alert-danger mt-3",4,"ngIf"],[3,"value"],[1,"alert","alert-success","mt-3"],[1,"alert","alert-danger","mt-3"]],template:function(e,a){e&1&&v(0,ii,47,11,"div",1),e&2&&d("ngIf",a.product)},dependencies:[E,k,w,ie,j,$,se,ce,U,oe,ae,z,G,Y,Z,J,S,N,ye],encapsulation:2})};var dt=[{path:"login",component:Me,title:"Login"},{path:"company-create",loadComponent:()=>import("./chunk-3C2VZXFZ.js").then(r=>r.CompanyCreateComponent),title:"Crear Empresa"},{path:"branch-create",loadComponent:()=>import("./chunk-3IRFPB2M.js").then(r=>r.BranchCreateComponent),title:"Crear Sucursal"},{path:"branch-select",loadComponent:()=>import("./chunk-ZELQ5IJB.js").then(r=>r.BranchSelectComponent),title:"Seleccionar Sucursal"},{path:"register",component:we,title:"Register"},{path:"plan",component:Fe,title:"Plans"},{path:"home",component:Ne,title:"Home",children:[{path:"inventory",component:ke,children:[{path:"",redirectTo:"/home/inventory/list",pathMatch:"full"},{path:"list",component:Re,title:"Lista de Inventario"},{path:"create",component:Te,title:"Crear Inventario"},{path:":id",component:Le,title:"Detalle Inventario"},{path:":id/edit",component:Ve,title:"Editar Inventario"}]},{path:"products",component:Ae,children:[{path:"",redirectTo:"/home/products/list",pathMatch:"full"},{path:"list",component:je,title:"Lista de Productos"},{path:"create",component:qe,title:"Crear Producto"},{path:":id",component:We,title:"Detalle Producto"},{path:":id/edit",component:Be,title:"Editar Producto"}]}]},{path:"",redirectTo:"login",pathMatch:"full"}];function mt(r,t){let e=sessionStorage.getItem("token"),a=e?r.clone({setHeaders:{Authorization:`Bearer ${e}`}}):r;return t(a)}var pt={providers:[Ye({eventCoalescing:!0}),at(dt),nt(rt([mt]))]};var He=class r{title="FE_FinanzApp";constructor(){}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=C({type:r,selectors:[["app-root"]],decls:1,vars:0,template:function(e,a){e&1&&R(0,"router-outlet")},dependencies:[S,re],styles:["router-outlet[_ngcontent-%COMP%]{flex:1;overflow:auto}"]})};it(He,pt).catch(r=>console.error(r));
